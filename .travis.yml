language: ruby
services:
  - mongodb
cache: bundler
rvm:
  - 2.1.2
script:
  - cd shapter-api && RAILS_ENV=test bundle exec rake 
before_script:
  - cd shapter-api && gem install capistrano-rvm -v '0.1.1'
  - cd shapter-api && gem install delayed_job -v '4.0.2'
  - cd shapter-api && bundle install
  - cd shapter-api && cp config/initializers/secret_token.rb.example config/initializers/secret_token.rb
  - cd shapter-api && cp config/initializers/aws_credentials.rb.example config/initializers/aws_credentials.rb
  - cd shapter-api && cp config/initializers/behave_io.rb.example config/initializers/behave_io.rb
  - cd shapter-api && cp config/mongoid.yml.example config/mongoid.yml
